{% extends "base.html" %}

{% block content %}
    <div style="display: flex; gap: 20px; margin-bottom: 30px;">
        <div style="flex: 1; padding: 20px; background: #ffe5e5; border: 1px solid red; border-radius: 10px; text-align: center;">
            <h3>Critical Equipment</h3>
            <h1>{{ kpi.critical_count }} Units</h1>
            <small>(Health < 30%)</small>
        </div>
        <div style="flex: 1; padding: 20px; background: #e6f2ff; border: 1px solid blue; border-radius: 10px; text-align: center;">
            <h3>Technician Load</h3>
            <h1>{{ kpi.tech_load }}%</h1>
            <small>Utilized</small>
        </div>
        <div style="flex: 1; padding: 20px; background: #e6fffa; border: 1px solid green; border-radius: 10px; text-align: center;">
            <h3>Open Requests</h3>
            <h1>{{ kpi.open_requests }} Pending</h1>
            <small>{{ kpi.overdue }} Overdue</small>
        </div>
    </div>

    <h2>Recent Requests</h2>
    <table>
        <thead>
            <tr>
                <th>Subject</th>
                <th>Equipment</th>
                <th>Type</th>
                <th>Stage</th>
            </tr>
        </thead>
        <tbody>
            {% for req in requests %}
            <tr>
                <td>{{ req.subject }}</td>
                <td>{{ req.equipment_name }}</td>
                <td>{{ req.type }}</td>
                <td>{{ req.stage }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}